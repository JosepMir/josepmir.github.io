<!doctype html>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="icon" href="cropped-ICO-WEB-1-32x32.png" sizes="32x32">
<link rel="icon" href="cropped-ICO-WEB-1-192x192.png" sizes="192x192">
<link rel="apple-touch-icon-precomposed" href="cropped-ICO-WEB-1-180x180.png">
<html>
<head>
    <title>RaypaNet</title>

    <!-- development version, includes helpful console warnings -->

    <link rel="stylesheet" type="text/css" href="fonts.css">
    <link rel="stylesheet" type="text/css" href="vuetify.min.css">


    <script src="./libs/polyfill.min.js"></script>
    <script src="./libs/vue.js"></script>
    <script src="./libs/vuetify.min.js"></script>
    <script src="./libs/vue-router.js"></script>
    <script src="./node_modules/jquery/dist/jquery.min.js"></script>

    <!-- chart -->
    <link href="./c3/c3.min.css" rel="stylesheet">
    <script src="./c3/d3.min.js" charset="utf-8"></script>
    <script src="./c3/c3.min.js"></script>



    <script src="./moment.min.js"></script>
    <script src="utils.js"></script>
    <!--al final de tot encara hi ha el data.js (ha danar al final)-->

    <script src="router.js"></script>





    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            /*width: 80% !important;
            height: 80% !important;
            background: red;*/
        }
        .v-toolbar__title {

        }
		/* fa la barra de dalt més curta*/
.v-toolbar__content {
			height:45px !important;
}
.v-content {
    padding: 39px 0px 0px !important;
}

/*oculta el 'rows per page' */
.v-datatable__actions__select {
    display: none;
}

/*pq Fullscreen tingui espai a lesquerra - conflicte amb pantalla registre*/
/*.v-input__slot {
	padding-left: 36px !important;
}*/

        * {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
        }

     td, th {
        
         padding: 0 15px !important;
     }
    </style>
</head>
<!-- https://vuetifyjs.com/en/components/selects -->
<body>

    <div id="app">

        <v-app id="inspire">


		<!-- <v-navigation-drawer -->
      <!-- :mini-variant.sync="mini" -->
      <!-- v-model="drawer" -->
      <!-- hide-overlay -->
      <!-- stateless -->
    <!-- > -->
	
	  <!-- disable-resize-watcher -->
        <!-- disable-route-watcher -->
			<v-navigation-drawer fixed  
                                  v-model="drawer"   
                                  app  
								  temporary
								  > 

                <v-list dense>
                    <v-list-tile @click="" :to="'/home'">
                        <v-list-tile-action>
                            <v-icon>home</v-icon>
                        </v-list-tile-action>
                        <v-list-tile-content>
                            <v-list-tile-title>Home</v-list-tile-title>
                        </v-list-tile-content>
                    </v-list-tile>

                    <v-list-tile @click="" :to="'/live'">
                        <v-list-tile-action>
                            <v-icon>loop</v-icon>
                        </v-list-tile-action>
                        <v-list-tile-content>
                            <v-list-tile-title>Live</v-list-tile-title>
                        </v-list-tile-content>
                    </v-list-tile>

                    <v-list-tile @click="" :to="'/devices'">
                        <v-list-tile-action>
                            <v-icon>settings</v-icon>
                        </v-list-tile-action>
                        <v-list-tile-content>
                            <v-list-tile-title>Devices</v-list-tile-title>
                        </v-list-tile-content>
                    </v-list-tile>

                    <!--<v-list-tile @click="" :to="'/register'">
                        <v-list-tile-action>
                            <v-icon>vpn_key</v-icon>
                        </v-list-tile-action>
                        <v-list-tile-content>
                            <v-list-tile-title>Register</v-list-tile-title>
                        </v-list-tile-content>
                    </v-list-tile>-->
                </v-list>
            </v-navigation-drawer>

           <!-- <v-navigation-drawer app></v-navigation-drawer>   -->
            <v-toolbar color="#3297db" dark fixed app>
                <v-toolbar-side-icon @click.stop="drawer = !drawer"></v-toolbar-side-icon>
                <!--<v-toolbar-title> RaypaNet</v-toolbar-title>-->
                <img src="logo.png" style="position: absolute; left: 60px; height:33px;"/>
                <!--<img src="raypa-autoclaves.png" style="position: absolute; right: 17px; height:20px;"></img>-->
            </v-toolbar>
            <v-content>

                <br />

                <v-fade-transition mode="out-in">
                    <router-view></router-view>
                </v-fade-transition>



            </v-content>
            <!--<v-footer app></v-footer>-->

        </v-app>
    </div>








    <script type="text/x-template" id="template-home">
        <v-layout row wrap justify-center  >
            <v-flex md6 >
                <v-layout row wrap>
                    <v-flex md7>
                        <v-select :items="sot.devicesPage.devicesList"
                                  item-text="name"
                                  item-value="ip_address"
                                  label="Device"
                                  v-model="sot.ip_address"
                                  box class="mx-4 "></v-select>

                    </v-flex>


                    <v-flex md5>
                        <v-btn v-on:click="downloadJson" color="info"
                               :loading="sot.JsonLoading"
                               :disabled="sot.JsonLoading"
                               @click.native="loader = 'sot.JsonLoading'">
                            <v-icon>refresh</v-icon>
                            <span slot="loader">{{sot.JsonLoadingKB}}</span>
                            <!-- <span slot="loader">Loading...</span> -->
                        </v-btn>
                    </v-flex>
                </v-layout>
            </v-flex>
            <v-flex md6>
                    <v-layout row wrap>
                <v-tooltip top>
                    <v-btn slot="activator" v-on:click="downloadFile" fab dark small color="warning"><v-icon dark>save</v-icon></v-btn>
                    <span>Save file</span>
                </v-tooltip>


                <v-tooltip top>
                    <v-btn slot="activator" v-on:click="showReport" fab dark small color="purple"><v-icon dark>local_printshop</v-icon></v-btn>
                    <span>Generate Report</span>
                </v-tooltip>
            
                <v-switch :label="'Fullscreen'" v-model="fullscreen" style="width:20px !important"></v-switch>
            </v-layout>

              
                </v-flex> 
            </v-flex>
            <!-- </v-layout>  -->
 <!-- <v-layout row wrap justify-center>  -->

            <v-flex xs5 v-show="negFullscreen">
                <!-- afegir attribut hide-actions si no volem el pagination -->
                <v-data-table  id="cyclesTable" class="mx-4 elevation-1"
                 :headers="sot.headers" 
                :items="sot.downloaded.cycles"
                :loading="sot.JsonLoading" style="overflow: auto"
                >
                    <template slot="items" slot-scope="props">
                        <tr :id="props.item.crc2" @click="showChart(props.item)">
                            <!--<td>{{ props.item.tit }}</td>-->

                            <!-- <td class="text-xs-center">{{ props.item.numpro }}</td> -->
                            <td class="text-xs-center">{{ props.item.hini_pro }}</td>
                            <td class="text-xs-center">{{ props.item.temp_ester }}</td>
                            <td class="text-xs-center" v-if="props.item.tpo_ester">{{props.item.tpo_ester}}</td>
                            <td class="text-xs-center" v-else>&#8734;</td><!--infinite sign-->
                            <td class="text-xs-center">{{ props.item.tpo_ester_real}}</td>
                        </tr>
                    </template>
                    <!-- <template slot="pageText" slot-scope="props">
                        Rows {{ props.pageStart }} - {{ props.pageStop }} of {{ props.itemsLength }}
                    </template> -->
                </v-data-table>
            </v-flex>
            <v-flex v-bind:class="{ xs7: negFullscreen }">
                <div id="chart" class="mx-4"></div>
            </v-flex>
            <v-snackbar v-model="sot.home.snackbar" top :timeout="0">
                {{sot.home.snackbarText}}
                <v-btn dark
                       flat
                       @click="sot.home.snackbar = false">
                    Close
                </v-btn>
            </v-snackbar>
        </v-layout>

    </script>







    <script type="text/x-template" id="template-devices">
        <div>
            <div class="container grid-list-md text-xs-center">
                <v-progress-linear v-show="sot.SerialLoading" :indeterminate="true"></v-progress-linear>
                <!--<v-flex xs6 sm6>-->
                <v-layout align-center justify-center row fill-height
                          v-for="item of sot.devicesPage.devicesList"
                          :key="item.id">
                    <!--v-model="sot.ip_address"-->
                    Device {{item.id}}
                    <v-text-field class="mx-4" label="Name" box v-model="item.name"
                                  ></v-text-field>
                    <v-text-field class="mx-4" label="IP Address" box v-model="item.ip_address"></v-text-field>
                    <v-text-field class="mx-4" label="SerialNumber" box v-model="item.serialnumber"
                                    append-icon="cloud_download"
                                   @click:append="downloadSerial($event, item)"
                                  hint="Click icon to get from device"
                                  ></v-text-field>
                    <!--<v-btn @click="downloadSerial($event, item)" color="info" :disabled="sot.SerialLoading">
                        <v-icon>cloud_download</v-icon>
                    </v-btn>-->

                    <v-text-field class="mx-4" label="Licence" box v-model="item.licence"
                                  append-icon="launch"
                                  @click:append="getLicence($event, item)"
                                    hint="Click icon to apply for one"
                                  ></v-text-field>
                    <!--<v-btn @click="getLicence($event, item)" color="info" :disabled="sot.SerialLoading">
                        <v-icon>cloud_download</v-icon>
                    </v-btn>-->
                </v-layout>

            </div>
        </div>
    </script>


    <script type="text/x-template" id="template-live">
        <v-layout row wrap justify-center>
            <v-layout row wrap>
                <v-flex md7>
                    <v-select :items="sot.devicesPage.devicesList"
                              item-text="name"
                              item-value="ip_address"
                              label="Device"
                              v-model="sot.ip_address"
                              box class="mx-4 "></v-select>

                </v-flex> 

                <!--<v-flex md5>
                    <v-btn v-on:click="play" :depressed="livePlaying" :color="playcolor">
                        <v-icon v-if="livePlaying">stop</v-icon>
                        <v-icon v-else>play_arrow</v-icon>
                        <span slot="loader">Loading...</span>
                    </v-btn>
                </v-flex>-->
            </v-layout>
            <v-flex>
                <div id="chart" class="mx-4"></div>
            </v-flex>

            <v-snackbar v-model="sot.live.snackbar" top>
                {{sot.live.snackbarText}}
            </v-snackbar>
        </v-layout>

    </script>

    <script type="text/x-template" id="template-register">
        <div>
            <div class="container grid-list-md text-xs-center">
                <v-progress-linear v-show="sot.SerialLoading" :indeterminate="true"></v-progress-linear>
                <!--<v-flex xs6 sm6>-->
                <h4>Register your device now and get a RaypaNet Licence free of charge</h4>
                <br />
                <v-layout align-center justify-center row fill-height>

                    <form @submit.prevent="submitRegister($event)">
                        <v-text-field class="mx-4" label="Name" prepend-icon="perm_identity" box v-model="sot.registerPage.name" required></v-text-field>
                        <v-text-field class="mx-4" label="Company" prepend-icon="account_balance" box v-model="sot.registerPage.company" required></v-text-field>

                        <v-text-field class="mx-4" label="E-Mail" prepend-icon="email" type="email" box v-model="sot.registerPage.email" required></v-text-field>
                        <!--<v-text-field class="mx-4" label="UA" box v-model="sot.registerPage.useragent"></v-text-field>-->

                        <v-select class="mx-4" box prepend-icon="location_on" v-model="sot.registerPage.country"
                                  :items="sot.countrylist"
                                  item-text="name"
                                  item-value="code"
                                  label="Country"
                                  return-object
                                  single-line required>

                        </v-select>


                        <v-text-field class="mx-4" prepend-icon="fingerprint" label="S/N" box v-model="sot.registerPage.serialnumber" required></v-text-field>

                        <v-btn type="submit" color="info">
                            Submit
                        </v-btn>
                    </form>
                </v-layout>
                <!--@click="submitRegister($event)"-->
            </div>
        </div>
    </script>

    <script src="homeMethods.js"></script>
    <script src="liveMethods.js"></script>
    <script src="devicesMethods.js"></script>
    <script src="data.js"></script>

</body>

</html>